---
- name: simple-provisionig
  host: localhost
  connection: localhost
  gather_facts: false
  vars:
    aws_region: ap-northeast-1
    vpc_name: BTC-VPC
    vpc_cidr_block: 10.210.1.0/16
    
    
  tasks:  
  - name: create a VPC
    ec2_vpc_net:
      name: "{{ vpc_name }}"
      cidr_block: "{{ vpc_cidr_block }}"
      region: "{{ aws_region }}"
      tags:
        Name: Test-VPC
      tenancy: default
    register: result_vpc
    
  - name: Create subnet
    ec2_vpc_subnet:
      state: present
      region: "{{ aws_region }}"
      vpc_id: "{{}}"
      cidr: "{{ subunet_cidr_block }}"
      tags:
        Name: webserver Subnet
    register: result_subnet